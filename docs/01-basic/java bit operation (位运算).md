# java bit operation (位运算)

## Java位运算

	java包含的位运算符有：左移（<<）、右移（>>）、无符号右移（>>>）、位与（&）、位或（|）、位非（~）、位异或（^）；
	除了位非是一元操作符外，其他都是二元操作符。
	
### 1.左移（<<）
	m<<n：表示 m二进制形式向左移动n位
	
将5左移2位：System.out.println(5<<2);//运行结果是20  

首先会将5转为2进制表示形式(java中，整数默认就是int类型,也就是32位):
0000 0000 0000 0000 0000 0000 0000 0101           然后左移2位后，低位补0：
0000 0000 0000 0000 0000 0000 0001 0100           换算成10进制为20

### 2.右移（>>）
	m>>n：表示m二进制形式向右移动n为
	>>：带符号右移，正数右移高位补0，负数右移高位补1

将5右移2位：System.out.println(5>>2);//运行结果是1

还是先将5转为2进制表示形式：
0000 0000 0000 0000 0000 0000 0000 0101 然后右移2位，高位补0：
0000 0000 0000 0000 0000 0000 0000 0001

### 3.无符号右移（>>>）
	我们知道在Java中int类型占32位，可以表示一个正数，也可以表示一个负数。正数换算成二进制后的最高位为0，负数的二进制最高位为1。
	>>>：无符号右移，无论正数还是负数，高位补0，结果都是正数，
	对于正数而言，>>和>>>没区别。
	对于负数而言，-2 >>> 1，结果是2147483647（Integer.MAX_VALUE），-1 >>> 1，结果是2147483647（Integer.MAX_VALUE）

例如  -5换算成二进制后为：
1111 1111 1111 1111 1111 1111 1111 1011   
(刚开始接触二进制时，不知道最高位是用来表示正负之分的，当时就总想不通。。明明算起来得到的就是一个正数-_-)

我们分别对5进行右移3位、 -5进行右移3位和无符号右移3位：
System.out.println(5>>3);//结果是0  
System.out.println(-5>>3);//结果是-1  
System.out.println(-5>>>3);//结果是536870911  

我们来看看它的移位过程(可以通过其结果换算成二进制进行对比)：

5换算成二进制： 0000 0000 0000 0000 0000 0000 0000 0101
5右移3位后结果为0，0的二进制为： 0000 0000 0000 0000 0000 0000 0000 0000        // (用0进行补位)
-5换算成二进制： 1111 1111 1111 1111 1111 1111 1111 1011
-5右移3位后结果为-1，-1的二进制为： 
1111 1111 1111 1111 1111 1111 1111 1111   // (用1进行补位)
-5无符号右移3位后的结果 536870911 换算成二进制： 
0001 1111 1111 1111 1111 1111 1111 1111   // (用0进行补位)

通过其结果转换成二进制后，我们可以发现，正数右移，高位用0补，负数右移，高位用1补，当负数使用无符号右移时，用0进行部位(自然而然的，就由负数变成了正数了)
注意：笔者在这里说的是右移，高位补位的情况。正数或者负数左移，低位都是用0补。(自行测试)

### 4.位与（&）
	第一个操作数的第n位与第二个操作数的第n位如果都是1，那么结果也为1，否则为0。
	
System.out.println(5 & 3);//结果为1  

还是老套路，将2个操作数和结果都转换为二进制进行比较：
5转换为二进制：0000 0000 0000 0000 0000 0000 0000 0101
3转换为二进制：0000 0000 0000 0000 0000 0000 0000 0011
-------------------------------------------------------------------------------------
1转换为二进制：0000 0000 0000 0000 0000 0000 0000 0001

### 5.位或（|）
	第一个操作数的第n位与第二个操作数的第n位只要有一个是1，那么结果的第n位就为1，否则为0。

System.out.println(5 | 3);//结果为7  

5转换为二进制：0000 0000 0000 0000 0000 0000 0000 0101
3转换为二进制：0000 0000 0000 0000 0000 0000 0000 0011
-------------------------------------------------------------------------------------
7转换为二进制：0000 0000 0000 0000 0000 0000 0000 0111

### 6.位异或（^）

	第一个操作数的第n位与第二哥操作数的第n位相反，那么结果第n位就为1，否则位0。

System.out.println(5 ^ 3);//结果为6  

5转换为二进制：0000 0000 0000 0000 0000 0000 0000 0101
3转换为二进制：0000 0000 0000 0000 0000 0000 0000 0011
-------------------------------------------------------------------------------------
6转换为二进制：0000 0000 0000 0000 0000 0000 0000 0110

### 7.位非（~）
	操作数的第n位为0则为1，否则为0。

System.out.println(~5);//结果为-6
5转换为二进制：0000 0000 0000 0000 0000 0000 0000 0101
-------------------------------------------------------------------------------------
-6转换为二进制：1111 1111 1111 1111 1111 1111 1111 1010


### 8.负数二进制表示

	负数的二进制表示方法：负数以其正值的补码形式表达。

	->原码：一个整数，按绝对值大小转换成的二进制数，称为原码。
	->反码：将二进制数按位取反，所得的新二进制数称为原二进制数的反码。
	->补码：反码加1称为补码。

例一：假设有一个 int 类型的数，值为5，那么，我们知道它在计算机中表示为：
 00000000 00000000 00000000 00000101

 5转换成二制是101，不过int类型的数占用4字节（32位），所以前面填了一堆0。
 现在想知道，-5在计算机中如何表示？
1、先取5原码：0000 0000 0000 0000 0000 0000 0000 0101
2、得反码：  1111 1111 1111 1111 1111 1111 1111 1010
3、得补码：  1111 1111 1111 1111 1111 1111 1111 1011

例二、再举一例，我们来看整数-1在计算机中如何表示。

假设这也是一个int类型，那么：

1、先取1的原码：00000000 00000000 00000000 00000001
2、得反码：     11111111 11111111 11111111 11111110
3、得补码：     11111111 11111111 11111111 11111111
可见，－1在计算机里用二进制表达就是全1。16进制为：0xFFFFFF。

例三、比如 00000000 00000000 00000000 00000101 是 5的 原码。

  取反操作指：原为1，得0；原为0，得1。（1变0; 0变1）
  将00000000 00000000 00000000 00000101每一位取反，得11111111 11111111 11111111 11111010。
  称：11111111 11111111 11111111 11111010 是 00000000 00000000 00000000 00000101 的反码。
  反码是相互的，所以也可称：
  11111111 11111111 11111111 11111010 和 00000000 00000000 00000000 00000101 互为反码。
  所以，-5 在计算机中表达为：11111111 11111111 11111111 11111011。转换为十六进制：0xFFFFFFFB。

##### 9.其他

由位运算操作符衍生而来的有：

&= 按位与赋值
|=  按位或赋值
^= 按位非赋值
>>= 右移赋值
>>>= 无符号右移赋值
<<= 赋值左移

和 += 一个概念而已。


二进制标识形式：

32位：0000 0000 0000 0000 0000 0000 0000 0001
64位：0000 0000 0000 0000 0000 0000 0000 0000 0000 0000 0000 0000 0000 0000 0000 0000

位数：0000 0000 0000 0000 0000 0000 0000 0000

2的0次方：1
2的1次方：2
2的2次方：4
2的3次方：8
2的4次方：16
2的5次方：32
2的6次方：64
2的7次方：128
2的8次方：256
2的9次方：512
2的10次方：1024
2的11次方：2048
2的12次方：4096
2的13次方：8192
2的14次方：16384
2的15次方：32768
2的16次方：65536

....
2的31次方:2 147 483 648
2的32次方:4 294 967 296


#### 9.java的运算符（优先级顺序）

优先级：依次由高到低

运算符分类	  结合顺序	         运算符

分隔符	     左结合	.    []     ( )     ;      ,
一元运算符	右结合	!  ++     --     -   ~
算术运算符
移位运算符    左结合	*     /      %    +     -      <<   >>   >>>

关系运算符	左结合	<     >     <=   >=   instanceof(Java 特有)   = =  !=
逻辑运算符	左结合	! &&  ||  ~  &  |  ^ 
三目运算符	右结合	布尔表达式?表达式1:表达式2
赋值运算符	右结合	=  *=     /=  %=   +=   -=    <<= >>= >>>=  &=  *=  |=
